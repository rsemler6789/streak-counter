{"code":"import { key, shouldIncrement } from './lib';\r\nexport function streakCounter(storage, date) {\r\n    const streakInLocalStorage = storage.getItem(key);\r\n    if (streakInLocalStorage) {\r\n        try {\r\n            let streak = JSON.parse(streakInLocalStorage || \"\");\r\n            let incrementOutput = shouldIncrement(date, streak.lastLoginDate);\r\n            if (incrementOutput === 'increment') {\r\n                let count = streak.currentCount + 1;\r\n                streak = {\r\n                    ...streak,\r\n                    lastLoginDate: date.toLocaleDateString(\"en-US\"),\r\n                    currentCount: count\r\n                };\r\n            }\r\n            else if (incrementOutput === 'reset') {\r\n                streak = {\r\n                    ...streak,\r\n                    lastLoginDate: date.toLocaleDateString(\"en-US\"),\r\n                    currentCount: 1\r\n                };\r\n            }\r\n            storage.setItem(key, JSON.stringify(streak));\r\n            return streak;\r\n        }\r\n        catch (error) {\r\n            console.error(\"Failed to parse streak from localStorage\");\r\n        }\r\n    }\r\n    const streak = {\r\n        currentCount: 1,\r\n        startDate: date.toLocaleDateString(\"en-US\"),\r\n        lastLoginDate: date.toLocaleDateString(\"en-US\"),\r\n    };\r\n    // store in localStorage\r\n    storage.setItem(key, JSON.stringify(streak));\r\n    return streak;\r\n}\r\n//# sourceMappingURL=index.js.map","references":["C:/Users/User/Desktop/Project/streak-counter/src/lib.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/index.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAU,GAAG,EAAe,eAAe,EAAE,MAAM,OAAO,CAAA;AAEjE,MAAM,UAAU,aAAa,CAAC,OAAgB,EAAE,IAAU;IACxD,MAAM,oBAAoB,GAAG,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAClD,IAAI,oBAAoB,EAAE;QACxB,IAAI;YACF,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,oBAAoB,IAAI,EAAE,CAAC,CAAC;YACpD,IAAI,eAAe,GAAG,eAAe,CAAC,IAAI,EAAE,MAAM,CAAC,aAAa,CAAC,CAAC;YAClE,IAAG,eAAe,KAAK,WAAW,EAAE;gBAClC,IAAI,KAAK,GAAG,MAAM,CAAC,YAAY,GAAG,CAAC,CAAC;gBACpC,MAAM,GAAG;oBACP,GAAG,MAAM;oBACT,aAAa,EAAE,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC;oBAC/C,YAAY,EAAE,KAAK;iBACpB,CAAA;aACF;iBAAM,IAAG,eAAe,KAAK,OAAO,EAAE;gBACrC,MAAM,GAAG;oBACP,GAAG,MAAM;oBACT,aAAa,EAAE,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC;oBAC/C,YAAY,EAAE,CAAC;iBAChB,CAAA;aACF;YACD,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YAC7C,OAAO,MAAM,CAAC;SACf;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,KAAK,CAAC,0CAA0C,CAAC,CAAC;SAC3D;KACF;IACD,MAAM,MAAM,GAAG;QACb,YAAY,EAAE,CAAC;QACf,SAAS,EAAE,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC;QAC3C,aAAa,EAAE,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC;KAChD,CAAC;IAEF,wBAAwB;IACxB,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;IAE7C,OAAO,MAAM,CAAC;AAChB,CAAC\"}","dts":{"name":"C:/Users/User/Desktop/Project/streak-counter/dist/index.d.ts","writeByteOrderMark":false,"text":"import { Streak } from './lib';\r\nexport declare function streakCounter(storage: Storage, date: Date): Streak;\r\n"}}
